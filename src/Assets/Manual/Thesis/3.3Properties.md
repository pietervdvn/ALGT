Declaring and checking properties
---------------------------------

The third important aspect of a language, apart from syntax and semantics, are the properties it obeys. These properties offer strong guarantees about the language and semantics. In the next paragraphs, two important properties of STFL are stated and added to the language definition. ALGT will quickcheck them.

### Progress and preservation

The first important guarantee is that a _well typed expression_ can always be evaluated. Without this property, called **progress**, using a typechecker would be useless; as some well-typed expression would still crash or hang. Another important property, called **preservation**, is that an expression of type `T` is still of type `T` after evaluation. While this property is not surprising, it is important to formally state this: together, these properties state that a well-typed expression can be evaluated to a new, well-typed expression of the same type.

As this is an important aspect as well, ALGT offers a way to incorporate these properties into the language definition. These properties are automatically checked by randomly generated examples or might be tested against an example program. Sadly, it is not possible to automatically proof arbitrary properties, so some cases for which the property does not hold might slip through.

### Stating Preservation

Preservation states that, _if an expression `e0` has type `T` and if `e0` can be evaluated to `e1`, then `e1` should be of type `T`too_. Note that all these conditions can be captured with the earlier definied relations: _if `e0 :: T` and `e0 → e1`, then `e1 :: T`_. This semantics are pretty close to a natural deduction rule with predicates, but instead of adding the consequent to the relation, checking wether the conclusion holds does suffice. 

The natural deduction rule syntax is thus reused to state properties:

$$$stfl.language![260..262]!file

### Stating Progress

Progress states that, _if an expression `e` can be typed as type `T`, then `e` is either fully evaluated or `e` can be evaluated further_. This to can be stated in the earlier defined expressions: _if `e :: T`, then `e:value` or `e → e1`_. This can't be 


$$$stfl.language![265..267]!file

